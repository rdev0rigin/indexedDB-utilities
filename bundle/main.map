{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap 55c6c153cfbc04f8fedb","webpack:///./src/index.ts","webpack:///./src/utilities/index-db.utility.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__utilities_index_db_utility__","iDBU","config","openIDB","__awaiter","this","__generator","_a","window","indexedDB","Promise","resolve","reject","request","open","dbName","version","onerror","evt","target","errorCode","onupgradeneeded","console","log","nextDb","result","storeNames","forEach","storeName","createObjectStore","keyPath","onsuccess","db","add","res","rej","transaction","objectStore","put","update","key","getRequest","updatedValue","__assign","delete","addRequest","remove","delRequest","assign","t","arguments","length","thisArg","_arguments","P","generator","fulfilled","step","next","e","rejected","done","then","apply","body","verb","v","op","f","TypeError","_","y","label","ops","pop","trys","push","g","sent","throw","return","Symbol","iterator"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(1);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__utilities_index_db_utility__ = __webpack_require__(2);\n\r\nvar iDBU = function (config) { return Object(__WEBPACK_IMPORTED_MODULE_0__utilities_index_db_utility__[\"a\" /* default */])(config); };\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (iDBU);\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export openIDB */\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\r\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n        s = arguments[i];\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n            t[p] = s[p];\r\n    }\r\n    return t;\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [0, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nfunction openIDB(config) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            if (!window.indexedDB) {\r\n                // console.log(\"Your browser doesn't support a stable version of IndexedDB. IndexedDB will not be available.\");\r\n                return [2 /*return*/, void 0];\r\n            }\r\n            return [2 /*return*/, new Promise(function (resolve, reject) {\r\n                    var request = indexedDB.open(config.dbName, config.version);\r\n                    request.onerror = function (evt) {\r\n                        reject(evt.target.errorCode);\r\n                    };\r\n                    request.onupgradeneeded = function (evt) {\r\n                        console.log('onupgradeneeded fired', evt);\r\n                        var nextDb = evt.target.result;\r\n                        config.storeNames\r\n                            .forEach(function (storeName) {\r\n                            nextDb.createObjectStore(storeName, {\r\n                                keyPath: 'dBKey'\r\n                            });\r\n                        });\r\n                    };\r\n                    request.onsuccess = function (evt) {\r\n                        var db = request.result;\r\n                        resolve({\r\n                            add: function (storeName, value) {\r\n                                return __awaiter(this, void 0, void 0, function () {\r\n                                    return __generator(this, function (_a) {\r\n                                        return [2 /*return*/, new Promise(function (res, rej) {\r\n                                                var request = db.transaction([storeName], 'readwrite')\r\n                                                    .objectStore(storeName)\r\n                                                    .add(value);\r\n                                                request.onsuccess = function (evt) {\r\n                                                    res(request.result);\r\n                                                };\r\n                                                request.onerror = function () {\r\n                                                    rej(request.result);\r\n                                                };\r\n                                            })];\r\n                                    });\r\n                                });\r\n                            },\r\n                            put: function (storeName, value) {\r\n                                return __awaiter(this, void 0, void 0, function () {\r\n                                    return __generator(this, function (_a) {\r\n                                        return [2 /*return*/, new Promise(function (res, rej) {\r\n                                                var request = db.transaction([storeName], 'readwrite')\r\n                                                    .objectStore(storeName)\r\n                                                    .put(value);\r\n                                                request.onsuccess = function () {\r\n                                                    res(request.result);\r\n                                                };\r\n                                                request.onerror = function () {\r\n                                                    rej(request.result);\r\n                                                };\r\n                                            })];\r\n                                    });\r\n                                });\r\n                            },\r\n                            update: function (storeName, key, value) {\r\n                                return __awaiter(this, void 0, void 0, function () {\r\n                                    return __generator(this, function (_a) {\r\n                                        return [2 /*return*/, new Promise(function (res, rej) {\r\n                                                var transaction = db.transaction([storeName]);\r\n                                                var getRequest = transaction\r\n                                                    .objectStore(storeName)\r\n                                                    .get(key);\r\n                                                transaction.onerror = function () {\r\n                                                    rej(request.result);\r\n                                                };\r\n                                                getRequest.onsuccess = function () {\r\n                                                    var updatedValue = __assign({}, getRequest.result, value);\r\n                                                    var delRequest = transaction([storeName])\r\n                                                        .objectStore(storeName)\r\n                                                        .delete(key);\r\n                                                    delRequest.onsuccess = function () {\r\n                                                        var addRequest = transaction([storeName])\r\n                                                            .objectStore(storeName)\r\n                                                            .add(updatedValue);\r\n                                                        addRequest.onsuccess = function () {\r\n                                                            res(addRequest.result);\r\n                                                        };\r\n                                                    };\r\n                                                };\r\n                                            })];\r\n                                    });\r\n                                });\r\n                            },\r\n                            remove: function (storeName, key) {\r\n                                return __awaiter(this, void 0, void 0, function () {\r\n                                    return __generator(this, function (_a) {\r\n                                        return [2 /*return*/, new Promise(function (res, rej) {\r\n                                                var delRequest = db.transaction([storeName], 'readwrite')\r\n                                                    .objectStore(storeName)\r\n                                                    .delete(key);\r\n                                                delRequest.onsuccess = function () {\r\n                                                    resolve(delRequest.result);\r\n                                                };\r\n                                                delRequest.onerror = function () {\r\n                                                    rej(delRequest.result);\r\n                                                };\r\n                                            })];\r\n                                    });\r\n                                });\r\n                            },\r\n                            get: function (storeName, key) {\r\n                                return __awaiter(this, void 0, void 0, function () {\r\n                                    return __generator(this, function (_a) {\r\n                                        return [2 /*return*/, new Promise(function (res, rej) {\r\n                                                var request = db.transaction([storeName])\r\n                                                    .objectStore(storeName)\r\n                                                    .get(key);\r\n                                                request.onsuccess = function () {\r\n                                                    res(request.result);\r\n                                                };\r\n                                                request.onerror.onerror = function () {\r\n                                                    rej(request.result);\r\n                                                };\r\n                                            })];\r\n                                    });\r\n                                });\r\n                            }\r\n                        });\r\n                    };\r\n                })];\r\n        });\r\n    });\r\n}\r\n/* harmony default export */ __webpack_exports__[\"a\"] = (openIDB);\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 55c6c153cfbc04f8fedb","import openIDB from './utilities/index-db.utility';\nimport {IDBUConfigModel} from \"./models/config.model\";\n\nconst iDBU = (config: IDBUConfigModel) => openIDB(config);\n\nexport default iDBU;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import {IDBUConfigModel} from '../models/config.model';\nimport {IDBUtility} from '../models/transaction.model';\n\nexport async function openIDB(config: IDBUConfigModel): Promise<IDBUtility> {\n\tif (!window.indexedDB) {\n\t\t// console.log(\"Your browser doesn't support a stable version of IndexedDB. IndexedDB will not be available.\");\n\t\treturn void 0;\n\t}\n\treturn new Promise<IDBUtility>((resolve, reject) => {\n\t\tlet request = indexedDB.open(config.dbName, config.version);\n\t\trequest.onerror = (evt: ErrorEvent | any) => {\n\t\t\treject(evt.target.errorCode);\n\t\t};\n\t\trequest.onupgradeneeded = (evt: IDBVersionChangeEvent | any): void => {\n\t\t\tconsole.log('onupgradeneeded fired', evt);\n\t\t\tlet nextDb = evt.target.result;\n\t\t\tconfig.storeNames\n\t\t\t\t.forEach((storeName: string) => {\n\t\t\t\t\tnextDb.createObjectStore(\n\t\t\t\t\t\tstoreName,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkeyPath: 'dBKey'\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t};\n\t\trequest.onsuccess = (evt) => {\n\t\t\tconst db = request.result;\n\t\t\tresolve({\n\t\t\t\tasync add(storeName: string, value: {}): Promise<string | {}> {\n\t\t\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t\t\tconst request = db.transaction([storeName], 'readwrite')\n\t\t\t\t\t\t\t.objectStore(storeName)\n\t\t\t\t\t\t\t.add(value);\n\t\t\t\t\t\trequest.onsuccess = (evt) => {\n\t\t\t\t\t\t\tres(request.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t\trequest.onerror = () => {\n\t\t\t\t\t\t\trej(request.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tasync put(storeName: string, value: {}): Promise<string | {}> {\n\t\t\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t\t\tconst request = db.transaction([storeName], 'readwrite')\n\t\t\t\t\t\t\t.objectStore(storeName)\n\t\t\t\t\t\t\t.put(value);\n\t\t\t\t\t\trequest.onsuccess = () => {\n\t\t\t\t\t\t\tres(request.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t\trequest.onerror = () => {\n\t\t\t\t\t\t\trej(request.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tasync update(storeName: string, key: string, value: {}): Promise<string | {}> {\n\t\t\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t\t\tconst transaction = db.transaction([storeName]);\n\t\t\t\t\t\tconst getRequest = transaction\n\t\t\t\t\t\t\t.objectStore(storeName)\n\t\t\t\t\t\t\t.get(key);\n\t\t\t\t\t\ttransaction.onerror = () => {\n\t\t\t\t\t\t\trej(request.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tgetRequest.onsuccess = () => {\n\t\t\t\t\t\t\tconst updatedValue = {...getRequest.result, ...value};\n\t\t\t\t\t\t\tconst delRequest = transaction([storeName])\n\t\t\t\t\t\t\t\t.objectStore(storeName)\n\t\t\t\t\t\t\t\t.delete(key);\n\t\t\t\t\t\t\tdelRequest.onsuccess = () => {\n\t\t\t\t\t\t\t\tconst addRequest = transaction([storeName])\n\t\t\t\t\t\t\t\t\t.objectStore(storeName)\n\t\t\t\t\t\t\t\t\t.add(updatedValue);\n\t\t\t\t\t\t\t\taddRequest.onsuccess = () => {\n\t\t\t\t\t\t\t\t\tres(addRequest.result);\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tasync remove(storeName: string, key: string): Promise<{}> {\n\t\t\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t\t\tconst delRequest = db.transaction([storeName], 'readwrite')\n\t\t\t\t\t\t\t.objectStore(storeName)\n\t\t\t\t\t\t\t.delete(key);\n\t\t\t\t\t\tdelRequest.onsuccess = () => {\n\t\t\t\t\t\t\tresolve(delRequest.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t\tdelRequest.onerror = () => {\n\t\t\t\t\t\t\trej(delRequest.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tasync get(storeName: string, key: string): Promise<{}> {\n\t\t\t\t\treturn new Promise((res, rej) => {\n\t\t\t\t\t\tconst request = db.transaction([storeName])\n\t\t\t\t\t\t\t.objectStore(storeName)\n\t\t\t\t\t\t\t.get(key);\n\t\t\t\t\t\trequest.onsuccess = () => {\n\t\t\t\t\t\t\tres(request.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t\trequest.onerror.onerror = () => {\n\t\t\t\t\t\t\trej(request.result);\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t});\n}\n\nexport default openIDB;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities/index-db.utility.ts"],"sourceRoot":""}